!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(t.jQuery)}(this,function(t){"use strict";t.fn.typeWatch=function(e){var a=t.extend({wait:750,callback:function(){},highlight:!0,captureLength:2,allowSubmit:!1,inputTypes:["TEXT","TEXTAREA","PASSWORD","TEL","SEARCH","URL","EMAIL","DATETIME","DATE","MONTH","WEEK","TIME","DATETIME-LOCAL","NUMBER","RANGE","DIV"]},e);function i(t){var e=(t.type||t.nodeName).toUpperCase();if(jQuery.inArray(e,a.inputTypes)>=0){var i={timer:null,text:"DIV"===e?jQuery(t).html():jQuery(t).val(),cb:a.callback,el:t,type:e,wait:a.wait};a.highlight&&"DIV"!==e&&jQuery(t).focus(function(){this.select()});jQuery(t).on("keydown paste cut input",function(t){var n=i.wait,l=!1,s=e;void 0!==t.keyCode&&13==t.keyCode&&"TEXTAREA"!==s&&"DIV"!==e&&(console.log("OVERRIDE"),n=1,l=!0);clearTimeout(i.timer),i.timer=setTimeout(function(){!function(t,e){var i="DIV"===t.type?jQuery(t.el).html():jQuery(t.el).val();(i.length>=a.captureLength&&i!=t.text||e&&(i.length>=a.captureLength||a.allowSubmit)||0==i.length&&t.text)&&(t.text=i,t.cb.call(t.el,i))}(i,l)},n)})}}return this.each(function(){i(this)})}}),$(function(){var t={callback:function(t){$("#link-availability-status").html(""),t.length>0&&($("#link-availability-status").html('<span><i class="fa fa-spinner"></i> Loading..</span>'),$.ajax({url:"/api/v1/custom_link/check_availability",type:"POST",data:{url_key:$("#custom_url_key").val()},dataType:"json"}).done(function(t){$("#link-availability-status").removeClass("text-danger").addClass("text-success"),$("#link-availability-status").html(t.data.success)}).fail(function(t,e){t.responseJSON.data&&t.responseJSON.data.errors?($("#link-availability-status").removeClass("text-success").addClass("text-danger"),$("#link-availability-status").html(t.responseJSON.data.errors[0].message)):$("#link-availability-status").html("Hmm. We're having trouble connecting to the server.")}))},wait:500,captureLength:1,highlight:!0,allowSubmit:!1};$("#custom_url_key").typeWatch(t)});
